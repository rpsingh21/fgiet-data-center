<div class="my-card my-5 pb-5">
    <div class="border center mb-3 p-2">
        <img
            class="pt-1 mx-auto img-fluid"
            src="/assets/img/logo.png"
            alt="fgiet"
        />
        <br /><b class="text-danger"
            >REGISTRATION FORM Of STUDENT (SESSION 2020-2021)</b
        >
    </div>
    <table class="table table-bordered">
        <tbody>
            <tr>
                <th class="text-success center" colspan="16">
                    Basic Details
                </th>
            </tr>
            <tr>
                <th colspan="4">Roll No *</th>
                <td colspan="10">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.roll_no"
                        disabled
                    />
                    <small *ngIf="errors.basic?.roll_no" class="text-danger">
                        {{ errors.basic.roll_no }}
                    </small>
                </td>
                <td colspan="2" rowspan="5" class="w-25">
                    <img
                        class="img-fluid"
                        style="width: -webkit-fill-available;"
                        [src]="
                            data.basic.image
                                ? data.basic.image
                                : '/assets/img/passport.jpeg'
                        "
                        alt="user image"
                    />
                </td>
            </tr>
            <tr>
                <th colspan="4" class="w-18">Name *</th>
                <td colspan="10">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.name"
                    />
                    <small *ngIf="errors.basic?.name" class="text-danger">
                        {{ errors.basic.name }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Father Name *</th>
                <td colspan="10">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.father_name"
                    />
                    <small
                        *ngIf="errors.basic?.father_name"
                        class="text-danger"
                    >
                        {{ errors.basic.father_name }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Mother Name *</th>
                <td colspan="10">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.mother_name"
                    />
                    <small
                        *ngIf="errors.basic?.mother_name"
                        class="text-danger"
                    >
                        {{ errors.basic.mother_name }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Address *</th>
                <td colspan="10">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.address"
                    />
                    <small *ngIf="errors.basic?.address" class="text-danger">
                        {{ errors.basic.address }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Date of Birth *</th>
                <td colspan="10">
                    <input
                        type="date"
                        class="form-control"
                        [(ngModel)]="data.basic.dob"
                    />
                    <small *ngIf="errors.basic?.dob" class="text-danger">
                        {{ errors.basic.dob }}
                    </small>
                </td>
                <td>
                    <input
                        *ngIf="!spinner.image"
                        type="file"
                        name="image"
                        class="form-control"
                        (change)="onUpload($event)"
                        accept="image/jpeg"
                    />
                    <div class="center" *ngIf="spinner.image">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <small *ngIf="errors.basic?.image" class="text-danger">
                        {{ errors.basic.image }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="16" class="center text-success">
                    Other Details
                </th>
            </tr>
            <tr>
                <th colspan="2" class="w-20">Branch *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.branch"
                        class="form-control"
                        [(ngModel)]="data.basic.branch"
                        (change)="change_semester_table()"
                    >
                        <option
                            *ngFor="let key of objectKeys(optionsData.branch)"
                            [value]="key"
                        >
                            {{ optionsData.branch[key] }}
                        </option>
                    </select>
                    <small *ngIf="errors.basic?.branch" class="text-danger">
                        {{ errors.basic.branch }}
                    </small>
                </td>
                <th colspan="2">Year *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.year"
                        class="form-control"
                        [(ngModel)]="data.basic.year"
                        (change)="change_semester_table()"
                    >
                        <option
                            *ngFor="let key of optionsData.year"
                            [value]="key"
                        >
                            {{ key }}
                        </option>
                    </select>
                    <small *ngIf="errors.basic?.year" class="text-danger">
                        {{ errors.basic.year }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="2">Gender *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.gender"
                        class="form-control"
                        [(ngModel)]="data.basic.gender"
                    >
                        <option
                            *ngFor="let key of objectKeys(optionsData.gender)"
                            [value]="key"
                        >
                            {{ optionsData.gender[key] }}
                        </option>
                    </select>
                    <small *ngIf="errors.basic?.gender" class="text-danger">
                        {{ errors.basic.gender }}
                    </small>
                </td>
                <th colspan="2">Category *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.category"
                        class="form-control"
                        [(ngModel)]="data.basic.category"
                    >
                        <option
                            *ngFor="let key of objectKeys(optionsData.category)"
                            [value]="key"
                        >
                            {{ optionsData.category[key] }}
                        </option>
                    </select>
                    <small *ngIf="errors.basic?.category" class="text-danger">
                        {{ errors.basic.category }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="2">Sub Category</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.sub_category"
                    />
                </td>
                <th colspan="2">Mobile No *</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.mobile_no"
                    />
                    <small *ngIf="errors.basic?.mobile_no" class="text-danger">
                        {{ errors.basic.mobile_no }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="2">Father Mobile No *</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.father_mobile_no"
                    />
                    <small
                        *ngIf="errors.basic?.father_mobile_no"
                        class="text-danger"
                    >
                        {{ errors.basic.father_mobile_no }}
                    </small>
                </td>
                <th colspan="2">Mother Mobile No</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.mother_mobile_no"
                    />
                    <small
                        *ngIf="errors.basic?.mother_mobile_no"
                        class="text-danger"
                    >
                        {{ errors.basic.mother_mobile_no }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="2">Email Id *</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.email"
                        disabled
                    />
                    <small *ngIf="errors.basic?.email" class="text-danger">
                        {{ errors.basic.email }}
                    </small>
                </td>
                <th colspan="2">Addhar No *</th>
                <td colspan="6">
                    <input
                        type="text"
                        class="form-control"
                        [(ngModel)]="data.basic.addhar_no"
                    />
                    <small *ngIf="errors.basic?.addhar_no" class="text-danger">
                        {{ errors.basic.addhar_no }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="2">Mode of Admission *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.mode_of_admission"
                        class="form-control"
                        [(ngModel)]="data.basic.mode_of_admission"
                    >
                        <option
                            *ngFor="
                                let key of objectKeys(
                                    optionsData.mode_of_admission
                                )
                            "
                            [value]="key"
                        >
                            {{ optionsData.mode_of_admission[key] }}
                        </option>
                    </select>
                    <small
                        *ngIf="errors.basic?.mode_of_admission"
                        class="text-danger"
                    >
                        {{ errors.basic.mode_of_admission }}
                    </small>
                </td>
                <th colspan="2">Admission Category *</th>
                <td colspan="6">
                    <select
                        *ngIf="optionsData?.admission_category"
                        class="form-control"
                        [(ngModel)]="data.basic.mode_of_admission_category"
                        (change)="change_semester_table()"
                    >
                        <option
                            *ngFor="
                                let key of objectKeys(
                                    optionsData.admission_category
                                )
                            "
                            [value]="key"
                        >
                            {{ optionsData.admission_category[key] }}
                        </option>
                    </select>
                    <small
                        *ngIf="errors.basic?.admission_category"
                        class="text-danger"
                    >
                        {{ errors.basic.admission_category }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="16" class="text-success center">
                    Academic Details *
                </th>
            </tr>
            <tr>
                <th colspan="4">Type</th>
                <th colspan="6">Board</th>
                <th colspan="6">Marks (%)</th>
            </tr>
            <tr *ngFor="let item of data.academics; index as i">
                <th colspan="4">{{ item.text }}</th>
                <td colspan="6">
                    <input
                        [(ngModel)]="item.board"
                        type="text"
                        class="form-control"
                    />
                    <small
                        *ngIf="errors.academics && errors.academics[i]?.board"
                        class="text-danger"
                    >
                        {{ errors.academics[i].board }}
                    </small>
                </td>
                <td colspan="6">
                    <input
                        [(ngModel)]="item.marks"
                        type="text"
                        class="form-control"
                    />
                    <small
                        *ngIf="errors.academics && errors.academics[i]?.marks"
                        class="text-danger"
                    >
                        {{ errors.academics[i].marks }}
                    </small>
                </td>
            </tr>
            <tr *ngIf="is_semester">
                <th colspan="16" class="text-success center">
                    Semester Details *
                </th>
            </tr>
            <tr *ngIf="is_semester">
                <td colspan="16">
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th>#</th>
                                <th *ngFor="let semester of data.semesters">
                                    Semester-{{ semester.semester }}
                                </th>
                            </tr>
                            <tr>
                                <th>Your Marks</th>
                                <td
                                    *ngFor="
                                        let semester of data.semesters;
                                        index as i
                                    "
                                >
                                    <input
                                        [(ngModel)]="semester.marks"
                                        type="text"
                                        class="form-control"
                                    />
                                    <small
                                        *ngIf="
                                            errors.semesters &&
                                            errors.semesters[i]?.marks
                                        "
                                        class="text-danger"
                                    >
                                        {{ errors.semesters[i].marks }}
                                    </small>
                                </td>
                            </tr>
                            <tr>
                                <th>Total Marks</th>
                                <td
                                    *ngFor="
                                        let semester of data.semesters;
                                        index as i
                                    "
                                >
                                    <input
                                        [(ngModel)]="semester.total_marks"
                                        type="text"
                                        class="form-control"
                                    />
                                    <small
                                        *ngIf="
                                            errors.semesters &&
                                            errors.semesters[i]?.total_marks
                                        "
                                        class="text-danger"
                                    >
                                        {{ errors.semesters[i].total_marks }}
                                    </small>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr>
                <th colspan="16" class="center text-success">
                    Fee Details
                </th>
            </tr>
            <tr>
                <th colspan="4">Year *</th>
                <td colspan="4">
                    <select
                        *ngIf="optionsData?.year"
                        class="form-control"
                        [(ngModel)]="data.fee.year"
                    >
                        <option
                            *ngFor="let key of optionsData.year"
                            [value]="key"
                        >
                            {{ key }}
                        </option>
                    </select>
                    <small *ngIf="errors.fee?.year" class="text-danger">
                        {{ errors.fee.year }}
                    </small>
                </td>
                <th colspan="4" class="w-20">Branch *</th>
                <td colspan="4">
                    <select
                        *ngIf="optionsData?.branch"
                        class="form-control"
                        [(ngModel)]="data.fee.branch"
                    >
                        <option
                            *ngFor="let key of objectKeys(optionsData.branch)"
                            [value]="key"
                        >
                            {{ optionsData.branch[key] }}
                        </option>
                    </select>
                    <small *ngIf="errors.fee?.branch" class="text-danger">
                        {{ errors.fee.branch }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Mode of Payment *</th>
                <td colspan="4">
                    <div class="form-row">
                        <div
                            [ngClass]="{
                                'form-group col-md-12':
                                    data.fee.mode_of_payment != 'CHALLAN',
                                'form-group col-md-5':
                                    data.fee.mode_of_payment == 'CHALLAN'
                            }"
                        >
                            <select
                                *ngIf="optionsData?.mode_of_payment"
                                class="form-control"
                                [(ngModel)]="data.fee.mode_of_payment"
                            >
                                <option
                                    *ngFor="
                                        let key of objectKeys(
                                            optionsData.mode_of_payment
                                        )
                                    "
                                    [value]="key"
                                >
                                    {{ optionsData.mode_of_payment[key] }}
                                </option>
                            </select>
                        </div>
                        <div
                            class="form-group col-md-7"
                            *ngIf="data.fee.mode_of_payment == 'CHALLAN'"
                        >
                            <input
                                [(ngModel)]="data.fee.challan_no"
                                type="text"
                                class="form-control"
                                placeholder="Challan no"
                            />
                        </div>
                    </div>
                    <small
                        *ngIf="errors.fee?.mode_of_payment"
                        class="text-danger"
                    >
                        {{ errors.fee.mode_of_payment }}
                    </small>
                </td>
                <th colspan="4">Amount *</th>
                <td colspan="4">
                    <input
                        [(ngModel)]="data.fee.amount"
                        type="text"
                        class="form-control"
                    />
                    <small *ngIf="errors.fee?.amount" class="text-danger">
                        {{ errors.fee.amount }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">Fee Type *</th>
                <td colspan="4">
                    <select
                        *ngIf="optionsData?.fee_type"
                        class="form-control"
                        [(ngModel)]="data.fee.fee_type"
                    >
                        <option
                            *ngFor="let key of objectKeys(optionsData.fee_type)"
                            [value]="key"
                        >
                            {{ optionsData.fee_type[key] }}
                        </option>
                    </select>
                    <small *ngIf="errors.fee?.fee_type" class="text-danger">
                        {{ errors.fee.fee_type }}
                    </small>
                </td>
                <th colspan="4">Total Fee *</th>
                <td colspan="4">
                    <input
                        [(ngModel)]="data.fee.total_fee"
                        type="text"
                        class="form-control"
                    />
                    <small *ngIf="errors.fee?.total_fee" class="text-danger">
                        {{ errors.fee.total_fee }}
                    </small>
                </td>
            </tr>
            <tr>
                <th colspan="4">
                    {{
                        data.fee.mode_of_payment == "CASH"
                            ? "Fee Receipt No"
                            : "Transfer Id"
                    }}
                    *
                </th>
                <td colspan="4">
                    <input
                        [(ngModel)]="data.fee.transfer_id"
                        type="text"
                        class="form-control"
                    />
                    <small *ngIf="errors.fee?.transfer_id" class="text-danger">
                        {{ errors.fee.transfer_id }}
                    </small>
                </td>
                <th colspan="4">Date *</th>
                <td colspan="4">
                    <input
                        [(ngModel)]="data.fee.transfer_date"
                        type="date"
                        class="form-control"
                    />
                    <small
                        *ngIf="errors.fee?.transfer_date"
                        class="text-danger"
                    >
                        {{ errors.fee.transfer_date }}
                    </small>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="center">
        <button
            *ngIf="!spinner.form"
            (click)="onSumitForm()"
            class="btn btn-primary"
        >
            <b class="mx-5">Submit</b>
        </button>
        <div
            *ngIf="spinner.form"
            class="spinner-border text-primary"
            role="status"
        >
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>
